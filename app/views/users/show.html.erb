<% provide(:title, " | #{@user.name}さん (@#{@user.username})") %>
<main class="text-center" >

	<% if flash[:login] || flash[:edit] || flash[:post_complete] || flash[:post_delete] %>
		<p class="text-center bg-info text-white h5 pt-2 pb-2">
			<%= flash[:login] %>
			<%= flash[:edit] %>
			<%= flash[:post_complete] %>
			<%= flash[:post_delete] %>
		</p>
	<% end %>

	<div class="container mt-5">

		<div class="row border border-bottom-0">
			<div class="col-xs-12 col-sm-4 pt-3">
				<%= image_tag(@user.icon.to_s, size: "200x200", class: "rounded-circle border") %>
			</div>
			<div class="col-xs-12 col-sm-4">
				<ul class="list-unstyled">
					<li class="h1 pt-5 pb-1"><%= @user.name %></li>
					<li class="h5 text-muted"><%= "@" + @user.username %></li>
					<% if @user.birthday %>
						<li><i class="fas fa-birthday-cake pr-2"></i><%= @user.birthday.to_s(:birthday) %></li>
					<% else %>
						<li><i class="fas fa-birthday-cake pr-2"></i>未設定</li>
					<% end %>
				</ul>
				<div class="row">
					<div class="col-xs-12 col-sm-12">
						<div id="follow_<%= @user.id %>_count">
							<%= render partial: "relationships/count", locals: { user: @user } %>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-4 py-4">
				<% if session_user?(@user) %>
					<%= link_to("プロフィールを編集", "/#{@user.username}/edit", { class: "btn btn-lg btn-outline-primary rounded-pill"}) %><br>
					<%= link_to("設定を編集", "#", { class: "btn btn-lg btn-outline-primary rounded-pill mt-3"}) %>
				<% else %>
					<div id="follow_<%= @user.id %>">
						<%= render partial: "relationships/relationship", locals: { user: @user }  %>
					</div>
				<% end %>
			</div>
		</div>

		<div class="row border border-top-0">
			<div class="col-xs-12 col-sm-12 text-left px-5 pt-4 pb-5 mt-3">
				<%= @user.introduction %>
			</div>
		</div>

		<div class="row mb-4">
			<div class="col-xs-12 col-sm-12 btn-group btn-group-toggle p-0" data-toggle="buttons">
			  <label class="btn btn-outline-primary py-2 active">
			    <input type="radio" name="options" checked>投稿
			  </label>
			  <label class="btn btn-outline-primary py-2">
			    <input type="radio" name="options">コメント
			  </label>
				<label class="btn btn-outline-primary py-2">
			    <input type="radio" name="options">いいね
			  </label>
			</div>
		</div>

		<div id="area_0">
			<% unless @user.post.empty? %>
				<% @user.post.reverse_each do |user_post| %>
					<div class="row border p-3 pb-4">
						<div class="col-xs-2 col-sm-2">
							<div class="p-3 mt-3">
								<%= user_post.created_at.to_s(:create_birthday) %><br>
								<%= user_post.created_at.to_s(:create_time) %>
							</div>
							<div id="like_<%= user_post.id %>" class="h4">
		             <%= render partial: 'likes/like', locals: { post: user_post } %>
		          </div>
							<%= link_to("削除", "/posts/delete/#{user_post.id}", { class: "btn btn-lg btn-outline-primary rounded-pill"}) %>
						</div>
						<div class="col-xs-3 col-sm-3">
							<%= image_tag(user_post.image.to_s, class: "img-fluid img-thumbnail") %>
						</div>
						<div class="col-xs-7 col-sm-7">
							<div class="text-left border mt-3">
								<div class="p-2">
									タイトル&nbsp;：&nbsp;<%= user_post.title %>
								</div>
							</div>
							<div class="text-left border input-lg p-3 h-75">
								<%= user_post.message %>
							</div>
						</div>
					</div>
				<% end %>
			<% else %>
				<div class="row border">
					<div class="col-xs-12 col-sm-12">
						<div class="h6 my-5">
							投稿がありません
						</div>
					</div>
				</div>
			<% end %>
		</div>

		<div class="d-none" id="area_1">
			<div class="row border">
				<div class="col-xs-12 col-sm-12">
					<div class="h6 my-5">
						コメントがありません
					</div>
				</div>
			</div>
		</div>

		<div class="d-none" id="area_2">
			<% unless @user.like.empty? %>
				<% @user.like.reverse_each do |user_like| %>
					<div class="row border p-3 pb-4">
						<div class="col-xs-2 col-sm-2">
							<div class="p-3 mt-3">
								<%= user_liked_post(user_like.post_id).created_at.to_s(:create_birthday) %><br>
								<%= user_liked_post(user_like.post_id).created_at.to_s(:create_time) %>
							</div>
						</div>
						<div class="col-xs-3 col-sm-3">
							<%= image_tag(user_liked_post(user_like.post_id).image.to_s, class: "img-fluid img-thumbnail") %>
						</div>
						<div class="col-xs-7 col-sm-7">
							<div class="text-left border mt-3">
								<div class="p-2">
									タイトル&nbsp;：&nbsp;<%= user_liked_post(user_like.post_id).title %>
								</div>
							</div>
							<div class="text-left border input-lg p-3 h-75">
								<%= user_liked_post(user_like.post_id).message %>
							</div>
						</div>
					</div>
				<% end %>
			<% else %>
				<div class="row border">
					<div class="col-xs-12 col-sm-12">
						<div class="h6 my-5">
							いいねがありません
						</div>
					</div>
				</div>
			<% end %>
		</div>

	</div>

</main>
